FROM n8nio/n8n:2.0.2

# Timezone
ENV GENERIC_TIMEZONE=Asia/Kolkata
# Redis
ENV QUEUE_BULL_PREFIX=n8n-
ENV QUEUE_BULL_REDIS_HOST=redis
ENV QUEUE_BULL_REDIS_PORT=6379
# Encryption 
ENV N8N_ENCRYPTION_KEY=encrytkey

# Database
ENV DB_TYPE=postgresdb
ENV DB_POSTGRESDB_HOST=postgres
ENV DB_POSTGRESDB_PORT=5432
ENV DB_POSTGRESDB_DATABASE=n8n
ENV DB_POSTGRESDB_USER=postgres_name
ENV DB_POSTGRESDB_PASSWORD=postgres_pasword
ENV DB_POSTGRESDB_SSL_REJECT_UNAUTHORIZED=true
#Queue
ENV EXECUTIONS_MODE=queue
ENV QUEUE_HEALTH_CHECK_ACTIVE=true
ENV QUEUE_WORKER_LOCK_DURATION=60000
ENV QUEUE_WORKER_LOCK_RENEW_TIME=30000
ENV QUEUE_WORKER_STALLED_INTERVAL=60000
# Endpoint
ENV N8N_METRICS=true

# Log level
ENV N8N_LOG_LEVEL=info


EXPOSE 5678

CMD ["worker","--concurrency=10"]
